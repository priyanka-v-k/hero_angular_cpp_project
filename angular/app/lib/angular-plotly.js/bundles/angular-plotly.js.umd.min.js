!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-plotly.js",["exports","@angular/core","@angular/common"],e):e(((t=t||self)["angular-plotly"]=t["angular-plotly"]||{},t["angular-plotly"].js={}),t.ng.core,t.ng.common)}(this,function(t,e,o){"use strict";var n=function(){return(n=Object.assign||function(t){for(var e,o=1,n=arguments.length;o<n;o++)for(var i in e=arguments[o])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function i(t,e,o,n){var i,r=arguments.length,l=r<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,o):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)l=Reflect.decorate(t,e,o,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(l=(r<3?i(l):r>3?i(e,o,l):i(e,o))||l);return r>3&&l&&Object.defineProperty(e,o,l),l}function r(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function l(t,e){var o,n,i,r,l={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;l;)try{if(o=1,n&&(i=2&r[0]?n.return:r[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,r[1])).done)return i;switch(n=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return l.label++,{value:r[1],done:!1};case 5:l.label++,n=r[1],r=[0];continue;case 7:r=l.ops.pop(),l.trys.pop();continue;default:if(!(i=(i=l.trys).length>0&&i[i.length-1])&&(6===r[0]||2===r[0])){l=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){l.label=r[1];break}if(6===r[0]&&l.label<i[1]){l.label=i[1],i=r;break}if(i&&l.label<i[2]){l.label=i[2],l.ops.push(r);break}i[2]&&l.ops.pop(),l.trys.pop();continue}r=e.call(t,l)}catch(t){r=[6,t],n=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}}function a(t){var e="function"==typeof Symbol&&t[Symbol.iterator],o=0;return e?e.call(t):{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}}}var s=!1,p=function(){function t(){}var o;return o=t,t.setModuleName=function(t){o._moduleName=t},t.setPlotly=function(t){if("object"==typeof t&&"function"!=typeof t.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");o._plotly=t},t.insert=function(t){return-1===o.instances.indexOf(t)&&o.instances.push(t),t},t.remove=function(t){var e=o.instances.indexOf(t);e>=0&&(o.instances.splice(e,1),o._plotly.purge(t))},Object.defineProperty(t.prototype,"debug",{get:function(){return!1===s},enumerable:!0,configurable:!0}),t.prototype.getInstanceByDivId=function(t){var e,n;try{for(var i=a(o.instances),r=i.next();!r.done;r=i.next()){var l=r.value;if(l&&l.id===t)return l}}catch(t){e={error:t}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.getPlotly=function(){if(void 0===o._plotly){var t="ViaCDN"===o._moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed";throw new Error(t)}return o._plotly},t.prototype.waitFor=function(t){return new Promise(function(e){var o=function(){t()?e():setTimeout(o,10)};o()})},t.prototype.newPlot=function(t,e,n,i,r){return a=this,s=void 0,u=function(){var a,s=this;return l(this,function(l){switch(l.label){case 0:return[4,this.waitFor(function(){return"waiting"!==s.getPlotly()})];case 1:return l.sent(),r?(a={data:e,layout:n,config:i,frames:r},[2,this.getPlotly().newPlot(t,a).then(function(){return o.insert(t)})]):[2,this.getPlotly().newPlot(t,e,n,i).then(function(){return o.insert(t)})]}})},new((p=void 0)||(p=Promise))(function(t,e){function o(t){try{i(u.next(t))}catch(t){e(t)}}function n(t){try{i(u.throw(t))}catch(t){e(t)}}function i(e){e.done?t(e.value):new p(function(t){t(e.value)}).then(o,n)}i((u=u.apply(a,s||[])).next())});var a,s,p,u},t.prototype.plot=function(t,e,o,n,i){if(i){var r={data:e,layout:o,config:n,frames:i};return this.getPlotly().plot(t,r)}return this.getPlotly().plot(t,e,o,n)},t.prototype.update=function(t,e,o,n,i){if(i){var r={data:e,layout:o,config:n,frames:i};return this.getPlotly().react(t,r)}return this.getPlotly().react(t,e,o,n)},t.prototype.resize=function(t){return this.getPlotly().Plots.resize(t)},t.instances=[],t._plotly=void 0,t._moduleName=void 0,t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t=o=i([e.Injectable({providedIn:"root"})],t)}(),u=function(){function t(t,o,n){this.plotly=t,this.iterableDiffers=o,this.keyValueDiffers=n,this.defaultClassName="js-plotly-plot",this.datarevision=0,this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.initialized=new e.EventEmitter,this.update=new e.EventEmitter,this.purge=new e.EventEmitter,this.error=new e.EventEmitter,this.afterExport=new e.EventEmitter,this.afterPlot=new e.EventEmitter,this.animated=new e.EventEmitter,this.animatingFrame=new e.EventEmitter,this.animationInterrupted=new e.EventEmitter,this.autoSize=new e.EventEmitter,this.beforeExport=new e.EventEmitter,this.buttonClicked=new e.EventEmitter,this.click=new e.EventEmitter,this.plotly_click=new e.EventEmitter,this.clickAnnotation=new e.EventEmitter,this.deselect=new e.EventEmitter,this.doubleClick=new e.EventEmitter,this.framework=new e.EventEmitter,this.hover=new e.EventEmitter,this.legendClick=new e.EventEmitter,this.legendDoubleClick=new e.EventEmitter,this.relayout=new e.EventEmitter,this.restyle=new e.EventEmitter,this.redraw=new e.EventEmitter,this.selected=new e.EventEmitter,this.selecting=new e.EventEmitter,this.sliderChange=new e.EventEmitter,this.sliderEnd=new e.EventEmitter,this.sliderStart=new e.EventEmitter,this.transitioning=new e.EventEmitter,this.transitionInterrupted=new e.EventEmitter,this.unhover=new e.EventEmitter,this.relayouting=new e.EventEmitter,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting"]}return t.prototype.ngOnInit=function(){var t=this;if(this.createPlot().then(function(){var e=t.createFigure();t.initialized.emit(e)}),this.plotly.debug&&this.click.observers.length>0){console.error("DEPRECATED: Reconsider using `(plotly_click)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}},t.prototype.ngOnDestroy=function(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);var t=this.createFigure();this.purge.emit(t),p.remove(this.plotlyInstance)},t.prototype.ngOnChanges=function(t){var e=!1,o=t.revision;o&&!o.isFirstChange()&&(e=!0);var n=t.debug;n&&!n.isFirstChange()&&(e=!0),e&&this.updatePlot(),this.updateWindowResizeHandler()},t.prototype.ngDoCheck=function(){var t=!1;this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(t=!0):this.layout?this.layoutDiffer=this.keyValueDiffers.find(this.layout).create():this.layoutDiffer=void 0;this.dataDiffer?this.dataDiffer.diff(this.data)&&(t=!0):Array.isArray(this.data)?this.dataDiffer=this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):this.dataDiffer=void 0;t&&this.plotlyInstance&&(this.datarevision+=1,this.updatePlot())},t.prototype.getWindow=function(){return window},t.prototype.getClassName=function(){var t=[this.defaultClassName];return Array.isArray(this.className)?t=t.concat(this.className):this.className&&t.push(this.className),t.join(" ")},t.prototype.createPlot=function(){var t=this;return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(function(e){t.plotlyInstance=e,t.getWindow().gd=t.debug?e:void 0,t.eventNames.forEach(function(o){var n="plotly_"+o.toLowerCase();e.on(n,function(e){return t[o].emit(e)})}),e.on("plotly_click",function(e){t.click.emit(e),t.plotly_click.emit(e)}),t.updateWindowResizeHandler()},function(e){console.error("Error while plotting:",e),t.error.emit(e)})},t.prototype.createFigure=function(){var t=this.plotlyInstance;return{data:t.data,layout:t.layout,frames:t._transitionData?t._transitionData._frames:null}},t.prototype.updatePlot=function(){var t=this;if(!this.plotlyInstance){var e=new Error("Plotly component wasn't initialized");throw this.error.emit(e),e}var o=n({datarevision:this.datarevision},this.layout);return this.plotly.update(this.plotlyInstance,this.data,o,this.config,this.frames).then(function(){var e=t.createFigure();t.update.emit(e)},function(e){console.error("Error while updating plot:",e),t.error.emit(e)})},t.prototype.updateWindowResizeHandler=function(){var t=this;this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=function(){return t.plotly.resize(t.plotlyInstance)},this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)},t.prototype.dataDifferTrackBy=function(t,e){var o=Object.assign({},e,{uid:""});return JSON.stringify(o)},i([e.ViewChild("plot",{static:!0}),r("design:type",e.ElementRef)],t.prototype,"plotEl",void 0),i([e.Input(),r("design:type",Array)],t.prototype,"data",void 0),i([e.Input(),r("design:type",Object)],t.prototype,"layout",void 0),i([e.Input(),r("design:type",Object)],t.prototype,"config",void 0),i([e.Input(),r("design:type",Array)],t.prototype,"frames",void 0),i([e.Input(),r("design:type",Object)],t.prototype,"style",void 0),i([e.Input(),r("design:type",String)],t.prototype,"divId",void 0),i([e.Input(),r("design:type",Number)],t.prototype,"revision",void 0),i([e.Input(),r("design:type",Object)],t.prototype,"className",void 0),i([e.Input(),r("design:type",Boolean)],t.prototype,"debug",void 0),i([e.Input(),r("design:type",Boolean)],t.prototype,"useResizeHandler",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"initialized",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"update",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"purge",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"error",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"afterExport",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"afterPlot",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"animated",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"animatingFrame",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"animationInterrupted",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"autoSize",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"beforeExport",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"buttonClicked",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"click",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"plotly_click",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"clickAnnotation",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"deselect",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"doubleClick",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"framework",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"hover",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"legendClick",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"legendDoubleClick",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"relayout",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"restyle",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"redraw",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"selected",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"selecting",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"sliderChange",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"sliderEnd",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"sliderStart",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"transitioning",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"transitionInterrupted",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"unhover",void 0),i([e.Output(),r("design:type",Object)],t.prototype,"relayouting",void 0),t=i([e.Component({selector:"plotly-plot",template:'<div #plot [attr.id]="divId" [className]="getClassName()" [ngStyle]="style"></div>',providers:[p]}),r("design:paramtypes",[p,e.IterableDiffers,e.KeyValueDiffers])],t)}(),d=function(){function t(){}return t=i([e.NgModule({imports:[o.CommonModule],declarations:[u],providers:[p],exports:[u]})],t)}(),c=function(){function t(){if(!this.isValid()){throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.")}p.setPlotly(n.plotlyjs)}var n;return n=t,t.prototype.isValid=function(){return void 0!==n.plotlyjs&&"function"==typeof n.plotlyjs.plot},t.plotlyjs={},t=n=i([e.NgModule({imports:[o.CommonModule,d],declarations:[],exports:[u]}),r("design:paramtypes",[])],t)}(),y=function(){function t(t){this.plotlyService=t,p.setModuleName("ViaCDN")}var n;return n=t,Object.defineProperty(t,"plotlyVersion",{set:function(t){if(!("latest"===t||/^\d\.\d{1,2}\.\d{1,2}$/.test(t)))throw new Error("Invalid plotly version. Please set 'latest' or version number (i.e.: 1.4.3)");n.loadViaCDN(),n._plotlyVersion=t},enumerable:!0,configurable:!0}),Object.defineProperty(t,"plotlyBundle",{set:function(t){if(!(null===t||n.plotlyBundleNames.indexOf(t)>=0)){var e=n.plotlyBundleNames.map(function(t){return'"'+t+'"'}).join(", ");throw new Error("Invalid plotly bundle. Please set to null for full or "+e+" for a partial bundle.")}n._plotlyBundle=t},enumerable:!0,configurable:!0}),t.loadViaCDN=function(){p.setPlotly("waiting");setTimeout(function(){var t=null==n._plotlyBundle?"https://cdn.plot.ly/plotly-"+n._plotlyVersion+".min.js":"https://cdn.plot.ly/plotly-"+n._plotlyBundle+"-"+n._plotlyVersion+".min.js",e=document.createElement("script");e.type="text/javascript",e.src=t,e.onerror=function(){return console.error("Error loading plotly.js library from "+t)},document.getElementsByTagName("head")[0].appendChild(e);var o=200,i=function(){var e=window.Plotly;if(e)p.setPlotly(e);else{if(!(o>0))throw new Error("Error loading plotly.js library from "+t+". Timeout.");o--,setTimeout(i,50)}};i()})},t.forRoot=function(t){throw new Error("[PlotlyViaCDNModule] forRoot method is deprecated. Please see: https://github.com/plotly/angular-plotly.js#customizing-the-plotlyjs-bundle")},t._plotlyBundle=null,t._plotlyVersion="latest",t.plotlyBundleNames=["basic","cartesian","geo","gl3d","gl2d","mapbox","finance"],t=n=i([e.NgModule({imports:[o.CommonModule,d],declarations:[],exports:[u]}),r("design:paramtypes",[p])],t)}(),f=function(){function t(){var t=window.Plotly;if(void 0===t)throw new Error("Plotly object not found on window.");p.setPlotly(t)}return t.forRoot=function(){throw new Error("[PlotlyViaWindowModule] forRoot method is deprecated. Please see: https://github.com/plotly/angular-plotly.js#plotly-via-window-module")},t=i([e.NgModule({imports:[o.CommonModule,d],declarations:[],exports:[u]}),r("design:paramtypes",[])],t)}();t.PlotComponent=u,t.PlotlyModule=c,t.PlotlyService=p,t.PlotlyViaCDNModule=y,t.PlotlyViaWindowModule=f,t.ɵa=d,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=angular-plotly.js.umd.min.js.map